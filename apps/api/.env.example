# ─────────────────────────────────────────────────────────────────────────────
# Backend Environment Variables — apps/api
# Copy this file to .env and fill in the values for your environment.
# .env is git-ignored; this file (.env.example) is safe to commit.
# ─────────────────────────────────────────────────────────────────────────────

# ── Server ────────────────────────────────────────────────────────────────────
# development | production | test
NODE_ENV=development
PORT=3000
# API version prefix — used in route paths (e.g. /api/v1/...)
API_VERSION=v1
# Log verbosity: error | warn | info | debug
LOG_LEVEL=info

# ── MongoDB ───────────────────────────────────────────────────────────────────
# Local dev:    mongodb://localhost:27017/ticketing-platform
# MongoDB Atlas: mongodb+srv://<user>:<pass>@<cluster>.mongodb.net/<dbname>
MONGODB_URI=mongodb://localhost:27017/ticketing-platform

# ── Redis ─────────────────────────────────────────────────────────────────────
# Preferred: full URL (e.g. Upstash — include rediss:// for TLS)
# REDIS_URL takes precedence over host/port/password below.
REDIS_URL=
# Fallback if REDIS_URL is not set (local Redis)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# ── JWT ───────────────────────────────────────────────────────────────────────
# CRITICAL: Use long, random strings in production (min 32 chars).
# Generate with: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=change-this-secret-in-production-min-32-chars
JWT_REFRESH_SECRET=change-this-refresh-secret-in-production-min-32-chars
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# ── Security / Rate Limiting ──────────────────────────────────────────────────
BCRYPT_ROUNDS=10
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# ── Booking ───────────────────────────────────────────────────────────────────
BOOKING_RESERVATION_TTL_MINUTES=15
IDEMPOTENCY_KEY_TTL_HOURS=24

# ── CORS ──────────────────────────────────────────────────────────────────────
# Dev: your Vite frontend URL. Prod: your deployed frontend domain.
# Multiple origins: CORS_ORIGIN=https://app.example.com,https://www.example.com
CORS_ORIGIN=http://localhost:5173

# ── Email (Resend) ────────────────────────────────────────────────────────────
# Leave RESEND_API_KEY empty in development — emails will be logged to the terminal.
# In production, set your Resend API key from https://resend.com
RESEND_API_KEY=
# Sender address — must be a verified domain in Resend for production.
FROM_EMAIL=onboarding@resend.dev
APP_NAME=Ticketing Platform
# Used in password reset email links — must point to your frontend.
FRONTEND_URL=http://localhost:5173

# ── Google OAuth ──────────────────────────────────────────────────────────────
# Obtain from Google Cloud Console → APIs & Services → Credentials.
# Leave empty to disable Google OAuth entirely.
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
# Must exactly match an Authorized Redirect URI in Google Cloud Console.
# Dev:  http://localhost:5173/auth/callback/google
# Prod: https://your-frontend-domain.vercel.app/auth/callback/google
GOOGLE_REDIRECT_URI=http://localhost:5173/auth/callback/google
